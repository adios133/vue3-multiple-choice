(function(s,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(s=typeof globalThis!="undefined"?globalThis:s||self,e(s["vue3-multiple-choice"]={},s.Vue))})(this,function(s,e){"use strict";var C=(()=>`.multiple-list[data-v-1833533a]{outline:0;cursor:pointer}.item[data-v-1833533a]{user-select:none}
`)(),m=(o,i)=>{const l=o.__vccOpts||o;for(const[a,t]of i)l[a]=t;return l};const _=["onClick"];var y=m(e.defineComponent({__name:"MultipleChoice",props:{dataSource:{type:Array,default:()=>[]},containerStyle:{type:Object,default:()=>({})},defaultKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]}},emits:["update:selectedKeys"],setup(o,{emit:i}){const l=o,a=e.ref(null),t=e.reactive([]),f=e.ref(0),p=e.ref(0);function h(n){n.key==="Control"&&(f.value=1),n.key==="Shift"&&(p.value=1)}function k(n){n.key==="Control"&&(f.value=0),n.key==="Shift"&&(p.value=0)}e.onMounted(()=>{a.value.addEventListener("keydown",h),a.value.addEventListener("keyup",k),a.value.addEventListener("blur",()=>{t.length=0,i("update:selectedKeys",t)}),t.length&&(t.length=0),t.push(...l.defaultKeys),i("update:selectedKeys",t)}),e.onBeforeUnmount(()=>{a.value.removeEventListener("keydown",h),a.value.removeEventListener("keyup",k)});const E=(n,v,c)=>{if(c.stopPropagation(),f.value)t.push(n.key);else if(p.value)if(t.length){const r=l.dataSource.findIndex(d=>d.key===t[t.length-1]),u=v;t.length=0,u>r?t.push(...l.dataSource.map(d=>d.key).slice(r,u+1)):t.push(...l.dataSource.map(d=>d.key).slice(u,r+1))}else t.push(n.key);else t.length=0,t.push(n.key);i("update:selectedKeys",t)};return(n,v)=>(e.openBlock(),e.createElementBlock("div",{class:"multiple-list",style:e.normalizeStyle(o.containerStyle),ref_key:"list",ref:a,tabindex:"-1"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.dataSource,(c,r)=>(e.openBlock(),e.createElementBlock("div",{class:"item",onClick:u=>E(c,r,u)},[e.renderSlot(n.$slots,"item",{isActived:o.selectedKeys.includes(c.key),itemData:c},void 0,!0)],8,_))),256))],4))}}),[["__scopeId","data-v-1833533a"]]);const S=[y];var g={install:function(o,i){S.forEach(l=>{o.component(l.name="MultipleChoice",l)})}};s.MultipleChoice=y,s.default=g,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
